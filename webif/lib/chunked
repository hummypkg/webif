
proc chunk {chk} {
	puts -nonewline [format "%x\r\n" [string length $chk]]
	puts -nonewline "$chk\r\n"
	flush stdout
}

proc chunk_pad {{len 256}} {
	incr len
	chunk [string repeat " " $len]
}

proc start_chunked {{type "text/html"}} {
	httpheader $type 0 "Transfer-Encoding: chunked\r\n"
	#chunk_pad
}

proc end_chunked {} {
	puts -nonewline "0\r\n\r\n\r\n"
}

